define(["jquery","core/ajax","core/str","core/notification"],function(a,b,c,d){function e(e){var g=a(e.target),h=b.call([{methodname:"local_signout_confirm_signout",args:{id:g.val()}}]);h[0].done(function(b){"confirm"===g.data("state")?(f(g,"undo"),setTimeout(function(){"undo"===g.data("state")&&(g.hide("slow",function(){g.parent().html("&#x2705;")}),a.when(c.get_string("duty_report:cell:confirmation_text","local_signout",b)).done(function(a){g.parent().parent().find("td.confirmation").text(a)}))},1e3*b.undowindow)):f(g,"confirm")}).fail(d.exception)}function f(b,d){b.data("state",d),a.when(c.get_string("confirmation_button:"+d,"local_signout")).done(function(a){b.text(a),b.addClass("confirm"===d?"btn-primary":"btn-secondary"),b.removeClass("confirm"===d?"btn-secondary":"btn-primary")})}return function(b){var c=a('.mx-confirmation-button[value="'+b+'"]');c.data("state","confirm"),c.click(e)}});