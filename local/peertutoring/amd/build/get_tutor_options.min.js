define(["jquery","core/ajax","core/notification"],function(a,b,c){function d(){var d=b.call([{methodname:"local_peertutoring_get_tutor_options",args:{userid:a(".mx-form select#id_tutor").val()}}]);d[0].done(function(b){var c=a(".mx-form select#id_student"),d=c.val();c.empty(),a.each(b.students,function(b,d){c.append(a("<option></option>").attr("value",d.userid).text(d.name))}),a(".mx-form select#id_student > option[value="+d+"]").length&&c.val(d),c.change();var e=a(".mx-form select#id_department"),f=e.val();e.empty(),a.each(b.departments,function(b,c){e.append(a("<option></option>").attr("value",c.id).text(c.name))}),a(".mx-form select#id_department > option[value="+f+"]").length&&e.val(f),e.change()}).fail(c.exception)}return function(){a(document).ready(d),a(".mx-form select#id_tutor").change(d)}});