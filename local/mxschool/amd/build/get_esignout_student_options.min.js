define(["jquery","core/str","core/ajax","core/notification"],function(a,b,c,d){return{updateWithPermissions:function(){a(".mx-form select#id_student").change(function(){var e=c.call([{methodname:"local_mxschool_get_esignout_student_options",args:{userid:a(".mx-form select#id_student > option:selected").val()}}]);e[0].done(function(c){a('.mx-form input[name="maydrivepassengers"]').val(c.maydrivepassengers?"1":"0");var d=a(".mx-form select#id_driver");d.empty(),a.when(b.get_string("esignout_form_driver_default","local_mxschool")).done(function(b){d.append(a("<option></option>").attr("value",0).text(b)),a.each(c.drivers,function(b,c){d.append(a("<option></option>").attr("value",c.esignoutid).text(c.name))})})}).fail(d.exception)})}}});