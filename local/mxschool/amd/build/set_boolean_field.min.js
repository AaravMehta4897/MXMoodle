define(["jquery","core/str","core/ajax","core/notification"],function(a,b,c,d){function e(){var e=a(this),f=c.call([{methodname:"local_mxschool_set_boolean_field",args:{table:e.attr("name").substring(0,e.attr("name").indexOf(":")),field:e.attr("name").substring(e.attr("name").indexOf(":")+1),id:e.val(),value:e.prop("checked")}}]);f[0].done(function(){var c=e.next();c.show(),setTimeout(function(){c.hide("slow",function(){var c=e.parent().children("button.mx-email-button");c&&(e.prop("checked")?a.when(b.get_string("email_button_default","local_mxschool")).done(function(a){c.text(a),c.trigger("showButton")}):c.trigger("hideButton"))})},1e3)}).fail(d.exception)}return function(b,c){var d=a('.mx-checkbox[value="'+c+'"][name="'+b+'"]');d.change(e)}});